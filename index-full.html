<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Crafter v2.0 - Professional AI Personality Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .glass-effect { backdrop-filter: blur(16px); background: rgba(255, 255, 255, 0.95); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .slider-container { position: relative; }
        .slider-value { position: absolute; right: 0; top: -20px; font-size: 12px; color: #666; }
        .personality-radar { max-width: 300px; margin: 0 auto; }
        .preset-card { transition: all 0.3s ease; cursor: pointer; }
        .preset-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.1); }
        .budget-indicator { transition: all 0.3s ease; }
        .budget-indicator.warning { background-color: #fbbf24; }
        .budget-indicator.danger { background-color: #ef4444; }
        .facet-slider { margin: 8px 0; }
        .preview-panel { min-height: 400px; max-height: 400px; overflow-y: auto; }
        .chat-message { margin: 8px 0; padding: 12px; border-radius: 8px; }
        .chat-user { background: #3b82f6; color: white; margin-left: 20%; }
        .chat-agent { background: #f3f4f6; color: #374151; margin-right: 20%; }
        
        /* Custom Range Sliders */
        .range-slider {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #e5e7eb;
            outline: none;
            margin: 10px 0;
        }
        
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .range-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* Tab styles */
        .tab-button {
            padding: 12px 24px;
            border-radius: 8px 8px 0 0;
            border: 1px solid #e5e7eb;
            border-bottom: none;
            background: #f9fafb;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            background: white;
            color: #3b82f6;
            border-color: #3b82f6 #3b82f6 white #3b82f6;
            z-index: 1;
            position: relative;
        }
        
        /* Animations */
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .chat-user, .chat-agent { margin: 8px 0; }
            .personality-radar { max-width: 250px; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-4xl font-bold">üß† Agent Crafter v2.0</h1>
                    <p class="text-blue-100 mt-2">Professional AI Personality Builder</p>
                </div>
                <div class="text-right">
                    <div class="budget-indicator bg-green-500 text-white px-4 py-2 rounded-lg">
                        <div class="text-sm">Personality Budget</div>
                        <div id="budgetDisplay" class="text-xl font-bold">500 / 500</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8">
        <div class="max-w-7xl mx-auto">
            <!-- Tab Navigation -->
            <div class="flex flex-wrap border-b border-gray-200 mb-6">
                <button class="tab-button active" onclick="switchTab('core')">
                    üß† Core Personality
                </button>
                <button class="tab-button" onclick="switchTab('communication')">
                    üí¨ Communication
                </button>
                <button class="tab-button" onclick="switchTab('expertise')">
                    üíº Expertise
                </button>
                <button class="tab-button" onclick="switchTab('behavioral')">
                    üéØ Behavioral
                </button>
                <button class="tab-button" onclick="switchTab('advanced')">
                    ‚öôÔ∏è Advanced
                </button>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Main Configuration Panel -->
                <div class="lg:col-span-2">
                    <!-- Tab 1: Core Personality -->
                    <div id="tab-core" class="tab-content active">
                        <div class="bg-white rounded-xl shadow-lg p-8 glass-effect">
                            <h2 class="text-2xl font-bold text-gray-800 mb-6">üß† Core Personality (Big 5)</h2>
                            
                            <div class="space-y-8">
                                <!-- Extraversion -->
                                <div class="personality-trait">
                                    <div class="flex justify-between items-center mb-3">
                                        <h3 class="text-lg font-semibold text-gray-700">Extraversion</h3>
                                        <span id="extraversion-value" class="text-blue-600 font-bold">50</span>
                                    </div>
                                    <input type="range" id="extraversion" class="range-slider" min="0" max="100" value="50">
                                    <div class="grid grid-cols-2 gap-4 mt-4">
                                        <div>
                                            <label class="text-sm text-gray-600">Warmth</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="extraversion-warmth">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Assertiveness</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="extraversion-assertiveness">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Activity</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="extraversion-activity">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Excitement Seeking</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="extraversion-excitement">
                                        </div>
                                    </div>
                                </div>

                                <!-- Agreeableness -->
                                <div class="personality-trait">
                                    <div class="flex justify-between items-center mb-3">
                                        <h3 class="text-lg font-semibold text-gray-700">Agreeableness</h3>
                                        <span id="agreeableness-value" class="text-green-600 font-bold">50</span>
                                    </div>
                                    <input type="range" id="agreeableness" class="range-slider" min="0" max="100" value="50">
                                    <div class="grid grid-cols-2 gap-4 mt-4">
                                        <div>
                                            <label class="text-sm text-gray-600">Trust</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="agreeableness-trust">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Cooperation</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="agreeableness-cooperation">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Empathy</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="agreeableness-empathy">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Modesty</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="agreeableness-modesty">
                                        </div>
                                    </div>
                                </div>

                                <!-- Conscientiousness -->
                                <div class="personality-trait">
                                    <div class="flex justify-between items-center mb-3">
                                        <h3 class="text-lg font-semibold text-gray-700">Conscientiousness</h3>
                                        <span id="conscientiousness-value" class="text-purple-600 font-bold">50</span>
                                    </div>
                                    <input type="range" id="conscientiousness" class="range-slider" min="0" max="100" value="50">
                                    <div class="grid grid-cols-2 gap-4 mt-4">
                                        <div>
                                            <label class="text-sm text-gray-600">Organization</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="conscientiousness-organization">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Discipline</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="conscientiousness-discipline">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Achievement</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="conscientiousness-achievement">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Dutifulness</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="conscientiousness-dutifulness">
                                        </div>
                                    </div>
                                </div>

                                <!-- Emotional Stability -->
                                <div class="personality-trait">
                                    <div class="flex justify-between items-center mb-3">
                                        <h3 class="text-lg font-semibold text-gray-700">Emotional Stability</h3>
                                        <span id="emotional-stability-value" class="text-red-600 font-bold">50</span>
                                    </div>
                                    <input type="range" id="emotional-stability" class="range-slider" min="0" max="100" value="50">
                                    <div class="grid grid-cols-2 gap-4 mt-4">
                                        <div>
                                            <label class="text-sm text-gray-600">Calm</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="emotional-calm">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Confidence</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="emotional-confidence">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Resilience</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="emotional-resilience">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Stress Management</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="emotional-stress">
                                        </div>
                                    </div>
                                </div>

                                <!-- Openness -->
                                <div class="personality-trait">
                                    <div class="flex justify-between items-center mb-3">
                                        <h3 class="text-lg font-semibold text-gray-700">Openness to Experience</h3>
                                        <span id="openness-value" class="text-orange-600 font-bold">50</span>
                                    </div>
                                    <input type="range" id="openness" class="range-slider" min="0" max="100" value="50">
                                    <div class="grid grid-cols-2 gap-4 mt-4">
                                        <div>
                                            <label class="text-sm text-gray-600">Creativity</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="openness-creativity">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Curiosity</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="openness-curiosity">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Imagination</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="openness-imagination">
                                        </div>
                                        <div>
                                            <label class="text-sm text-gray-600">Intellectual</label>
                                            <input type="range" class="range-slider" min="0" max="100" value="50" data-facet="openness-intellectual">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 2: Communication Style Matrix -->
                    <div id="tab-communication" class="tab-content">
                        <div class="bg-white rounded-xl shadow-lg p-8 glass-effect">
                            <h2 class="text-2xl font-bold text-gray-800 mb-6">üí¨ Communication Style Matrix</h2>
                            
                            <div class="space-y-8">
                                <!-- Primary Communication Style -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Primary Style</h3>
                                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                                        <label class="comm-style-option cursor-pointer">
                                            <input type="radio" name="primaryStyle" value="professional" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-blue-500 transition-all">
                                                <div class="text-3xl mb-2">üè¢</div>
                                                <div class="font-medium">Professional</div>
                                                <div class="text-sm text-gray-500">Corporate, formal, structured</div>
                                            </div>
                                        </label>
                                        <label class="comm-style-option cursor-pointer">
                                            <input type="radio" name="primaryStyle" value="friendly" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-blue-500 transition-all">
                                                <div class="text-3xl mb-2">üòä</div>
                                                <div class="font-medium">Friendly</div>
                                                <div class="text-sm text-gray-500">Warm, approachable, casual</div>
                                            </div>
                                        </label>
                                        <label class="comm-style-option cursor-pointer">
                                            <input type="radio" name="primaryStyle" value="academic" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-blue-500 transition-all">
                                                <div class="text-3xl mb-2">üéì</div>
                                                <div class="font-medium">Academic</div>
                                                <div class="text-sm text-gray-500">Scholarly, detailed, precise</div>
                                            </div>
                                        </label>
                                        <label class="comm-style-option cursor-pointer">
                                            <input type="radio" name="primaryStyle" value="creative" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-blue-500 transition-all">
                                                <div class="text-3xl mb-2">üé®</div>
                                                <div class="font-medium">Creative</div>
                                                <div class="text-sm text-gray-500">Artistic, expressive, original</div>
                                            </div>
                                        </label>
                                        <label class="comm-style-option cursor-pointer">
                                            <input type="radio" name="primaryStyle" value="technical" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-blue-500 transition-all">
                                                <div class="text-3xl mb-2">‚öôÔ∏è</div>
                                                <div class="font-medium">Technical</div>
                                                <div class="text-sm text-gray-500">Analytical, precise, factual</div>
                                            </div>
                                        </label>
                                        <label class="comm-style-option cursor-pointer">
                                            <input type="radio" name="primaryStyle" value="coaching" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-blue-500 transition-all">
                                                <div class="text-3xl mb-2">üèÜ</div>
                                                <div class="font-medium">Coaching</div>
                                                <div class="text-sm text-gray-500">Motivational, supportive, goal-oriented</div>
                                            </div>
                                        </label>
                                        <label class="comm-style-option cursor-pointer">
                                            <input type="radio" name="primaryStyle" value="therapeutic" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-blue-500 transition-all">
                                                <div class="text-3xl mb-2">üßò</div>
                                                <div class="font-medium">Therapeutic</div>
                                                <div class="text-sm text-gray-500">Empathetic, healing, supportive</div>
                                            </div>
                                        </label>
                                        <label class="comm-style-option cursor-pointer">
                                            <input type="radio" name="primaryStyle" value="enthusiastic" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-blue-500 transition-all">
                                                <div class="text-3xl mb-2">‚ö°</div>
                                                <div class="font-medium">Enthusiastic</div>
                                                <div class="text-sm text-gray-500">Energetic, passionate, inspiring</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Communication Modifiers -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Style Modifiers</h3>
                                    <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="comm-modifier w-4 h-4 text-blue-600" value="humorous">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üòÑ</span>
                                                <span>Humorous/Witty</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="comm-modifier w-4 h-4 text-blue-600" value="direct">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üéØ</span>
                                                <span>Direct/Blunt</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="comm-modifier w-4 h-4 text-blue-600" value="diplomatic">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">ü§ù</span>
                                                <span>Diplomatic/Tactful</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="comm-modifier w-4 h-4 text-blue-600" value="storytelling">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üìñ</span>
                                                <span>Storytelling/Narrative</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="comm-modifier w-4 h-4 text-blue-600" value="patient">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üßò‚Äç‚ôÇÔ∏è</span>
                                                <span>Patient/Measured</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="comm-modifier w-4 h-4 text-blue-600" value="encouraging">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üí™</span>
                                                <span>Encouraging/Supportive</span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Response Characteristics -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-6">Response Characteristics</h3>
                                    
                                    <!-- Verbosity Slider -->
                                    <div class="mb-6">
                                        <div class="flex justify-between items-center mb-2">
                                            <label class="font-medium text-gray-700">Verbosity Level</label>
                                            <span id="verbosity-value" class="text-blue-600 font-bold">5</span>
                                        </div>
                                        <input type="range" id="verbosity" class="range-slider" min="1" max="10" value="5">
                                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                                            <span>Ultra concis</span>
                                            <span>√âquilibr√©</span>
                                            <span>Exhaustif</span>
                                        </div>
                                        <div id="verbosity-description" class="text-sm text-gray-600 mt-2">√âquilibr√© - R√©ponses compl√®tes mais concises</div>
                                    </div>

                                    <!-- Response Structure -->
                                    <div class="mb-6">
                                        <label class="font-medium text-gray-700 mb-3 block">Response Structure</label>
                                        <select id="responseStructure" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                            <option value="bullets">Bullet points / Lists</option>
                                            <option value="paragraphs" selected>Paragraphes fluides</option>
                                            <option value="mixed">Mix structur√©</option>
                                            <option value="qa">Question-Answer format</option>
                                            <option value="steps">Step-by-step guides</option>
                                        </select>
                                    </div>

                                    <!-- Emotional Tone Sliders -->
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="font-medium text-gray-700">Optimisme vs R√©alisme</label>
                                                <span id="optimism-value" class="text-green-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="optimism" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Tr√®s r√©aliste</span>
                                                <span>Tr√®s optimiste</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="font-medium text-gray-700">Formality Level</label>
                                                <span id="formality-value" class="text-purple-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="formality" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Tr√®s informel</span>
                                                <span>Tr√®s formel</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="font-medium text-gray-700">Patience vs Urgence</label>
                                                <span id="patience-value" class="text-blue-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="patience" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Tr√®s urgent</span>
                                                <span>Tr√®s patient</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="font-medium text-gray-700">Confiance vs Humilit√©</label>
                                                <span id="confidence-value" class="text-orange-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="confidence" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Tr√®s humble</span>
                                                <span>Tr√®s confiant</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 3: Professional Expertise -->
                    <div id="tab-expertise" class="tab-content">
                        <div class="bg-white rounded-xl shadow-lg p-8 glass-effect">
                            <h2 class="text-2xl font-bold text-gray-800 mb-6">üíº Professional Expertise</h2>
                            
                            <div class="space-y-8">
                                <!-- Expertise Level -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Knowledge Level</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
                                        <label class="expertise-level-option cursor-pointer">
                                            <input type="radio" name="expertiseLevel" value="novice" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-green-500 transition-all">
                                                <div class="text-3xl mb-2">üå±</div>
                                                <div class="font-medium">Novice</div>
                                                <div class="text-sm text-gray-500">Learning, asking questions</div>
                                            </div>
                                        </label>
                                        <label class="expertise-level-option cursor-pointer">
                                            <input type="radio" name="expertiseLevel" value="competent" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-green-500 transition-all">
                                                <div class="text-3xl mb-2">üìö</div>
                                                <div class="font-medium">Competent</div>
                                                <div class="text-sm text-gray-500">Solid knowledge, reliable</div>
                                            </div>
                                        </label>
                                        <label class="expertise-level-option cursor-pointer">
                                            <input type="radio" name="expertiseLevel" value="proficient" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-green-500 transition-all">
                                                <div class="text-3xl mb-2">üéØ</div>
                                                <div class="font-medium">Proficient</div>
                                                <div class="text-sm text-gray-500">Experienced, nuanced</div>
                                            </div>
                                        </label>
                                        <label class="expertise-level-option cursor-pointer">
                                            <input type="radio" name="expertiseLevel" value="expert" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-green-500 transition-all">
                                                <div class="text-3xl mb-2">üèÜ</div>
                                                <div class="font-medium">Expert</div>
                                                <div class="text-sm text-gray-500">Deep knowledge, teaching</div>
                                            </div>
                                        </label>
                                        <label class="expertise-level-option cursor-pointer">
                                            <input type="radio" name="expertiseLevel" value="master" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-green-500 transition-all">
                                                <div class="text-3xl mb-2">üëë</div>
                                                <div class="font-medium">Master</div>
                                                <div class="text-sm text-gray-500">Innovative, visionary</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Role Archetype -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Role Archetype</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <label class="role-archetype-option cursor-pointer">
                                            <input type="radio" name="roleArchetype" value="consultant" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-purple-500 transition-all">
                                                <div class="text-3xl mb-2">üè¢</div>
                                                <div class="font-medium">Consultant</div>
                                                <div class="text-sm text-gray-500">Strategic, analytical advisor</div>
                                            </div>
                                        </label>
                                        <label class="role-archetype-option cursor-pointer">
                                            <input type="radio" name="roleArchetype" value="mentor" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-purple-500 transition-all">
                                                <div class="text-3xl mb-2">üë®‚Äçüè´</div>
                                                <div class="font-medium">Mentor</div>
                                                <div class="text-sm text-gray-500">Patient, educational guide</div>
                                            </div>
                                        </label>
                                        <label class="role-archetype-option cursor-pointer">
                                            <input type="radio" name="roleArchetype" value="partner" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-purple-500 transition-all">
                                                <div class="text-3xl mb-2">ü§ù</div>
                                                <div class="font-medium">Partner</div>
                                                <div class="text-sm text-gray-500">Collaborative, supportive ally</div>
                                            </div>
                                        </label>
                                        <label class="role-archetype-option cursor-pointer">
                                            <input type="radio" name="roleArchetype" value="executor" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-purple-500 transition-all">
                                                <div class="text-3xl mb-2">‚ö°</div>
                                                <div class="font-medium">Executor</div>
                                                <div class="text-sm text-gray-500">Action-oriented, efficient</div>
                                            </div>
                                        </label>
                                        <label class="role-archetype-option cursor-pointer">
                                            <input type="radio" name="roleArchetype" value="researcher" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-purple-500 transition-all">
                                                <div class="text-3xl mb-2">üî¨</div>
                                                <div class="font-medium">Researcher</div>
                                                <div class="text-sm text-gray-500">Thorough, evidence-based</div>
                                            </div>
                                        </label>
                                        <label class="role-archetype-option cursor-pointer">
                                            <input type="radio" name="roleArchetype" value="creator" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-purple-500 transition-all">
                                                <div class="text-3xl mb-2">üé®</div>
                                                <div class="font-medium">Creator</div>
                                                <div class="text-sm text-gray-500">Innovative, expressive</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Industry Focus -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Industry Focus (Multi-select)</h3>
                                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="industry-focus w-4 h-4 text-blue-600" value="technology">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üíª</span>
                                                <span>Technology & Software</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="industry-focus w-4 h-4 text-blue-600" value="business">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üìà</span>
                                                <span>Business & Finance</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="industry-focus w-4 h-4 text-blue-600" value="education">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üéì</span>
                                                <span>Education & Training</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="industry-focus w-4 h-4 text-blue-600" value="healthcare">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üè•</span>
                                                <span>Healthcare & Wellness</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="industry-focus w-4 h-4 text-blue-600" value="creative">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üé¨</span>
                                                <span>Creative & Media</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="industry-focus w-4 h-4 text-blue-600" value="science">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üî¨</span>
                                                <span>Science & Research</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="industry-focus w-4 h-4 text-blue-600" value="sales">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">üíº</span>
                                                <span>Sales & Marketing</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="industry-focus w-4 h-4 text-blue-600" value="legal">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-xl">‚öñÔ∏è</span>
                                                <span>Legal & Compliance</span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Thinking Styles -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Cognitive Approach</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-3">Thinking Styles (Multi-select)</h4>
                                            <div class="space-y-2">
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="thinking-style w-4 h-4 text-blue-600" value="analytical">
                                                    <span class="flex items-center space-x-2">
                                                        <span class="text-lg">üîç</span>
                                                        <span>Analytical - Data, logic, facts</span>
                                                    </span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="thinking-style w-4 h-4 text-blue-600" value="intuitive">
                                                    <span class="flex items-center space-x-2">
                                                        <span class="text-lg">üí°</span>
                                                        <span>Intuitive - Patterns, insights, gut feelings</span>
                                                    </span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="thinking-style w-4 h-4 text-blue-600" value="systematic">
                                                    <span class="flex items-center space-x-2">
                                                        <span class="text-lg">üìã</span>
                                                        <span>Systematic - Processes, steps, methods</span>
                                                    </span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="thinking-style w-4 h-4 text-blue-600" value="creative">
                                                    <span class="flex items-center space-x-2">
                                                        <span class="text-lg">üåà</span>
                                                        <span>Creative - Alternatives, brainstorming</span>
                                                    </span>
                                                </label>
                                            </div>
                                        </div>

                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-3">Problem Solving Approach</h4>
                                            <div class="space-y-4">
                                                <div>
                                                    <div class="flex justify-between items-center mb-2">
                                                        <label class="text-sm text-gray-600">Speed vs Thoroughness</label>
                                                        <span id="speed-thoroughness-value" class="text-blue-600 font-bold">50</span>
                                                    </div>
                                                    <input type="range" id="speed-thoroughness" class="range-slider" min="0" max="100" value="50">
                                                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                        <span>Tr√®s rapide</span>
                                                        <span>Tr√®s approfondi</span>
                                                    </div>
                                                </div>
                                                
                                                <div>
                                                    <div class="flex justify-between items-center mb-2">
                                                        <label class="text-sm text-gray-600">Risk Taking vs Cautious</label>
                                                        <span id="risk-caution-value" class="text-green-600 font-bold">50</span>
                                                    </div>
                                                    <input type="range" id="risk-caution" class="range-slider" min="0" max="100" value="50">
                                                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                        <span>Tr√®s prudent</span>
                                                        <span>Prend des risques</span>
                                                    </div>
                                                </div>
                                                
                                                <div>
                                                    <div class="flex justify-between items-center mb-2">
                                                        <label class="text-sm text-gray-600">Independent vs Collaborative</label>
                                                        <span id="independent-collaborative-value" class="text-purple-600 font-bold">50</span>
                                                    </div>
                                                    <input type="range" id="independent-collaborative" class="range-slider" min="0" max="100" value="50">
                                                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                        <span>Tr√®s ind√©pendant</span>
                                                        <span>Tr√®s collaboratif</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Learning Preferences -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Learning & Teaching Approach</h3>
                                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="learning-approach w-4 h-4 text-blue-600" value="visual">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üìä</span>
                                                <span>Visual examples</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="learning-approach w-4 h-4 text-blue-600" value="stepByStep">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üìù</span>
                                                <span>Step-by-step tutorials</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="learning-approach w-4 h-4 text-blue-600" value="theoretical">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üìö</span>
                                                <span>Theoretical concepts</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="learning-approach w-4 h-4 text-blue-600" value="handson">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üîß</span>
                                                <span>Hands-on practice</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="learning-approach w-4 h-4 text-blue-600" value="analogies">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üåç</span>
                                                <span>Real-world analogies</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="learning-approach w-4 h-4 text-blue-600" value="cases">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üìÇ</span>
                                                <span>Case studies</span>
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 4: Behavioral Patterns -->
                    <div id="tab-behavioral" class="tab-content">
                        <div class="bg-white rounded-xl shadow-lg p-8 glass-effect">
                            <h2 class="text-2xl font-bold text-gray-800 mb-6">üéØ Behavioral Patterns</h2>
                            
                            <div class="space-y-8">
                                <!-- Proactivity Level -->
                                <div>
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="text-lg font-semibold text-gray-700">Proactivity Level</h3>
                                        <span id="proactivity-value" class="text-indigo-600 font-bold">50</span>
                                    </div>
                                    <input type="range" id="proactivity" class="range-slider" min="0" max="100" value="50">
                                    <div class="flex justify-between text-xs text-gray-500 mt-2">
                                        <span>Reactive only</span>
                                        <span>Balanced</span>
                                        <span>Highly proactive</span>
                                    </div>
                                    <div id="proactivity-description" class="text-sm text-gray-600 mt-2">
                                        √âquilibr√© - R√©pond aux questions et sugg√®re occasionnellement
                                    </div>
                                </div>

                                <!-- Questioning Style -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Questioning Style</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
                                        <label class="questioning-style-option cursor-pointer">
                                            <input type="radio" name="questioningStyle" value="socratic" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-indigo-500 transition-all">
                                                <div class="text-3xl mb-2">ü§î</div>
                                                <div class="font-medium">Socratic</div>
                                                <div class="text-sm text-gray-500">Guides to answers</div>
                                            </div>
                                        </label>
                                        <label class="questioning-style-option cursor-pointer">
                                            <input type="radio" name="questioningStyle" value="direct" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-indigo-500 transition-all">
                                                <div class="text-3xl mb-2">‚ùì</div>
                                                <div class="font-medium">Direct</div>
                                                <div class="text-sm text-gray-500">Straight questions</div>
                                            </div>
                                        </label>
                                        <label class="questioning-style-option cursor-pointer">
                                            <input type="radio" name="questioningStyle" value="clarifying" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-indigo-500 transition-all">
                                                <div class="text-3xl mb-2">üîç</div>
                                                <div class="font-medium">Clarifying</div>
                                                <div class="text-sm text-gray-500">Ensures understanding</div>
                                            </div>
                                        </label>
                                        <label class="questioning-style-option cursor-pointer">
                                            <input type="radio" name="questioningStyle" value="challenging" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-indigo-500 transition-all">
                                                <div class="text-3xl mb-2">‚öîÔ∏è</div>
                                                <div class="font-medium">Challenging</div>
                                                <div class="text-sm text-gray-500">Devil's advocate</div>
                                            </div>
                                        </label>
                                        <label class="questioning-style-option cursor-pointer">
                                            <input type="radio" name="questioningStyle" value="supportive" class="sr-only">
                                            <div class="p-4 border-2 border-gray-200 rounded-lg text-center hover:border-indigo-500 transition-all">
                                                <div class="text-3xl mb-2">ü§ó</div>
                                                <div class="font-medium">Supportive</div>
                                                <div class="text-sm text-gray-500">Encouraging questions</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Error Handling & Uncertainty -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Error Handling & Uncertainty</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="error-handling w-4 h-4 text-indigo-600" value="acknowledge">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üéØ</span>
                                                <span>Acknowledge uncertainty explicitly</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="error-handling w-4 h-4 text-indigo-600" value="confidence">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üìä</span>
                                                <span>Provide confidence levels (%)</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="error-handling w-4 h-4 text-indigo-600" value="verification">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">‚úÖ</span>
                                                <span>Suggest verification steps</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="error-handling w-4 h-4 text-indigo-600" value="alternatives">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üîÑ</span>
                                                <span>Offer alternative perspectives</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="error-handling w-4 h-4 text-indigo-600" value="escalate">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üÜò</span>
                                                <span>Escalate to human when unsure</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="error-handling w-4 h-4 text-indigo-600" value="research">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üî¨</span>
                                                <span>Suggest additional research</span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Response Behavior -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-6">Response Behavior</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-gray-700">Follow-up Frequency</label>
                                                <span id="followup-value" class="text-blue-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="followup" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Never follows up</span>
                                                <span>Regular follow-ups</span>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-gray-700">Detail Elaboration</label>
                                                <span id="elaboration-value" class="text-green-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="elaboration" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Minimal detail</span>
                                                <span>Rich elaboration</span>
                                            </div>
                                        </div>

                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-gray-700">Context Awareness</label>
                                                <span id="context-value" class="text-purple-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="context" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Focused response</span>
                                                <span>Broad context</span>
                                            </div>
                                        </div>

                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-gray-700">Example Usage</label>
                                                <span id="examples-value" class="text-orange-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="examples" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Abstract only</span>
                                                <span>Rich examples</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Cultural & Adaptation -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Cultural & Contextual Adaptation</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <h4 class="font-medium text-gray-700 mb-3">Language Adaptation</h4>
                                            <select id="languageStyle" class="w-full md:w-1/2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                                <option value="global">Global English (neutral)</option>
                                                <option value="american">American English (casual, direct)</option>
                                                <option value="british">British English (formal, diplomatic)</option>
                                                <option value="technical">Technical English (precise, jargon)</option>
                                                <option value="simple">Simple English (accessible, clear)</option>
                                            </select>
                                        </div>

                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-gray-700">Cultural Sensitivity</label>
                                                <span id="cultural-sensitivity-value" class="text-teal-600 font-bold">50</span>
                                            </div>
                                            <input type="range" id="cultural-sensitivity" class="range-slider" min="0" max="100" value="50">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Direct communication</span>
                                                <span>High cultural awareness</span>
                                            </div>
                                        </div>

                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="adaptation-behavior w-4 h-4 text-indigo-600" value="formality-matching">
                                                <span>Match user's formality level</span>
                                            </label>
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="adaptation-behavior w-4 h-4 text-indigo-600" value="escalate-professional">
                                                <span>Escalate formality in professional contexts</span>
                                            </label>
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="adaptation-behavior w-4 h-4 text-indigo-600" value="deescalate-casual">
                                                <span>De-escalate in casual conversations</span>
                                            </label>
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="adaptation-behavior w-4 h-4 text-indigo-600" value="inclusive-language">
                                                <span>Prioritize inclusive language</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Interaction Patterns -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Interaction Patterns</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="interaction-pattern w-4 h-4 text-indigo-600" value="memory-reference">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üß†</span>
                                                <span>Reference previous conversations</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="interaction-pattern w-4 h-4 text-indigo-600" value="progress-tracking">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üìà</span>
                                                <span>Track user progress/goals</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="interaction-pattern w-4 h-4 text-indigo-600" value="personalization">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üë§</span>
                                                <span>Personalize responses to user style</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="interaction-pattern w-4 h-4 text-indigo-600" value="anticipate-needs">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üîÆ</span>
                                                <span>Anticipate follow-up questions</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="interaction-pattern w-4 h-4 text-indigo-600" value="emotional-awareness">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">‚ù§Ô∏è</span>
                                                <span>Recognize emotional context</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="interaction-pattern w-4 h-4 text-indigo-600" value="boundary-respect">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üõ°Ô∏è</span>
                                                <span>Respect personal boundaries</span>
                                            </span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 5: Advanced Configuration -->
                    <div id="tab-advanced" class="tab-content">
                        <div class="bg-white rounded-xl shadow-lg p-8 glass-effect">
                            <h2 class="text-2xl font-bold text-gray-800 mb-6">‚öôÔ∏è Advanced Configuration</h2>
                            
                            <div class="space-y-8">
                                <!-- Technical Capabilities -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Technical Capabilities</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="web-search">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üîç</span>
                                                <span>Web Search & Research</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="memory">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üß†</span>
                                                <span>Conversation Memory</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="file-analysis">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üìÑ</span>
                                                <span>File Analysis</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="code-generation">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üíª</span>
                                                <span>Code Generation</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="image-analysis">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üñºÔ∏è</span>
                                                <span>Image Analysis</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="data-visualization">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üìä</span>
                                                <span>Data Visualization</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="api-integration">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üîå</span>
                                                <span>API Integration</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="workflow-automation">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">‚ö°</span>
                                                <span>Workflow Automation</span>
                                            </span>
                                        </label>
                                        <label class="flex items-center space-x-3">
                                            <input type="checkbox" class="technical-capability w-4 h-4 text-indigo-600" value="real-time-data">
                                            <span class="flex items-center space-x-2">
                                                <span class="text-lg">üîÑ</span>
                                                <span>Real-time Data Access</span>
                                            </span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Response Limits & Security -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-6">Response Limits & Security</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Max Response Length</label>
                                            <select id="maxResponseLength" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                                <option value="short">Short (‚â§ 100 words)</option>
                                                <option value="medium" selected>Medium (‚â§ 300 words)</option>
                                                <option value="long">Long (‚â§ 500 words)</option>
                                                <option value="extended">Extended (‚â§ 1000 words)</option>
                                                <option value="unlimited">Unlimited</option>
                                            </select>
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Security Level</label>
                                            <select id="securityLevel" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                                <option value="open">Open - No restrictions</option>
                                                <option value="standard" selected>Standard - Basic filtering</option>
                                                <option value="strict">Strict - Enhanced filtering</option>
                                                <option value="enterprise">Enterprise - Maximum security</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="mt-4">
                                        <h4 class="font-medium text-gray-700 mb-3">Content Filters</h4>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="content-filter w-4 h-4 text-indigo-600" value="adult-content" checked>
                                                <span>Filter adult content</span>
                                            </label>
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="content-filter w-4 h-4 text-indigo-600" value="violence" checked>
                                                <span>Filter violent content</span>
                                            </label>
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="content-filter w-4 h-4 text-indigo-600" value="hate-speech" checked>
                                                <span>Filter hate speech</span>
                                            </label>
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="content-filter w-4 h-4 text-indigo-600" value="misinformation">
                                                <span>Fact-checking verification</span>
                                            </label>
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="content-filter w-4 h-4 text-indigo-600" value="privacy-protection">
                                                <span>Privacy protection</span>
                                            </label>
                                            <label class="flex items-center space-x-3">
                                                <input type="checkbox" class="content-filter w-4 h-4 text-indigo-600" value="legal-compliance">
                                                <span>Legal compliance checking</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Custom Instructions -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Custom Instructions</h3>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">System Instructions</label>
                                            <textarea id="systemInstructions" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 resize-none" placeholder="Define specific behaviors, rules, or constraints for your agent..."></textarea>
                                            <div class="text-xs text-gray-500 mt-1">These instructions will be processed at the system level</div>
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">User Context Instructions</label>
                                            <textarea id="userInstructions" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 resize-none" placeholder="Instructions that will be shared with users about this agent..."></textarea>
                                            <div class="text-xs text-gray-500 mt-1">These will be visible to users interacting with the agent</div>
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Fallback Responses</label>
                                            <textarea id="fallbackResponses" rows="2" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 resize-none" placeholder="Custom responses when the agent cannot fulfill a request..."></textarea>
                                            <div class="text-xs text-gray-500 mt-1">Comma-separated responses for uncertainty situations</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Conditional Behaviors -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Conditional Behaviors</h3>
                                    <div class="space-y-4">
                                        <div class="p-4 bg-gray-50 rounded-lg">
                                            <h4 class="font-medium text-gray-700 mb-3">Context-Based Adaptations</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="conditional-behavior w-4 h-4 text-indigo-600" value="formal-business">
                                                    <span>More formal in business contexts</span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="conditional-behavior w-4 h-4 text-indigo-600" value="casual-personal">
                                                    <span>More casual in personal contexts</span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="conditional-behavior w-4 h-4 text-indigo-600" value="detailed-technical">
                                                    <span>More detailed for technical topics</span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="conditional-behavior w-4 h-4 text-indigo-600" value="simplified-beginner">
                                                    <span>Simplified for beginners</span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="conditional-behavior w-4 h-4 text-indigo-600" value="urgent-responsive">
                                                    <span>More responsive for urgent requests</span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="conditional-behavior w-4 h-4 text-indigo-600" value="creative-brainstorm">
                                                    <span>More creative during brainstorming</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="p-4 bg-blue-50 rounded-lg">
                                            <h4 class="font-medium text-gray-700 mb-3">Time-Based Behaviors</h4>
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="time-behavior w-4 h-4 text-indigo-600" value="morning-energetic">
                                                    <span>More energetic in morning</span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="time-behavior w-4 h-4 text-indigo-600" value="evening-reflective">
                                                    <span>More reflective in evening</span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="time-behavior w-4 h-4 text-indigo-600" value="weekend-relaxed">
                                                    <span>More relaxed on weekends</span>
                                                </label>
                                                <label class="flex items-center space-x-3">
                                                    <input type="checkbox" class="time-behavior w-4 h-4 text-indigo-600" value="deadline-focused">
                                                    <span>More focused near deadlines</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Integration Settings -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Integration Settings</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Preferred Model</label>
                                            <select id="preferredModel" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                                <option value="auto" selected>Auto-select optimal model</option>
                                                <option value="gpt-4">GPT-4 (OpenAI)</option>
                                                <option value="claude-3">Claude 3 (Anthropic)</option>
                                                <option value="gemini">Gemini Pro (Google)</option>
                                                <option value="llama-2">Llama 2 (Meta)</option>
                                                <option value="custom">Custom model</option>
                                            </select>
                                        </div>

                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Response Format</label>
                                            <select id="responseFormat" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500">
                                                <option value="adaptive" selected>Adaptive (context-dependent)</option>
                                                <option value="markdown">Markdown</option>
                                                <option value="plain-text">Plain text</option>
                                                <option value="structured">Structured (JSON)</option>
                                                <option value="rich-html">Rich HTML</option>
                                            </select>
                                        </div>

                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-gray-700">Temperature</label>
                                                <span id="temperature-value" class="text-purple-600 font-bold">0.7</span>
                                            </div>
                                            <input type="range" id="temperature" class="range-slider" min="0" max="1" step="0.1" value="0.7">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Consistent</span>
                                                <span>Creative</span>
                                            </div>
                                        </div>

                                        <div>
                                            <div class="flex justify-between items-center mb-2">
                                                <label class="text-sm font-medium text-gray-700">Response Timeout (s)</label>
                                                <span id="timeout-value" class="text-orange-600 font-bold">30</span>
                                            </div>
                                            <input type="range" id="timeout" class="range-slider" min="5" max="120" step="5" value="30">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>Fast</span>
                                                <span>Patient</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Advanced Export/Import -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-700 mb-4">Configuration Management</h3>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div class="p-4 bg-green-50 rounded-lg">
                                            <h4 class="font-medium text-green-800 mb-2">üíæ Export Options</h4>
                                            <div class="space-y-2">
                                                <button onclick="exportFullConfig()" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg text-sm transition-all">
                                                    Export Complete Configuration
                                                </button>
                                                <button onclick="exportPromptOnly()" class="w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg text-sm transition-all">
                                                    Export as Prompt Template
                                                </button>
                                                <button onclick="exportSummary()" class="w-full bg-green-400 hover:bg-green-500 text-white py-2 px-4 rounded-lg text-sm transition-all">
                                                    Export Summary Report
                                                </button>
                                            </div>
                                        </div>

                                        <div class="p-4 bg-blue-50 rounded-lg">
                                            <h4 class="font-medium text-blue-800 mb-2">üì• Import Options</h4>
                                            <div class="space-y-2">
                                                <input type="file" id="importConfig" accept=".json" class="hidden">
                                                <button onclick="document.getElementById('importConfig').click()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg text-sm transition-all">
                                                    Import Configuration
                                                </button>
                                                <button onclick="loadCommunityPreset()" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg text-sm transition-all">
                                                    Load Community Preset
                                                </button>
                                                <button onclick="validateConfig()" class="w-full bg-blue-400 hover:bg-blue-500 text-white py-2 px-4 rounded-lg text-sm transition-all">
                                                    Validate Configuration
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar: Live Preview -->
                <div class="lg:col-span-1">
                    <div class="sticky top-8 space-y-6">
                        <!-- Personality Radar -->
                        <div class="bg-white rounded-xl shadow-lg p-6 glass-effect">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">üìä Personality Radar</h3>
                            <div class="personality-radar">
                                <canvas id="personalityChart"></canvas>
                            </div>
                        </div>

                        <!-- Live Preview Chat -->
                        <div class="bg-white rounded-xl shadow-lg p-6 glass-effect">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">üí¨ Live Preview</h3>
                            <div class="preview-panel" id="previewPanel">
                                <div class="chat-message chat-user">
                                    Bonjour ! Peux-tu te pr√©senter ?
                                </div>
                                <div class="chat-message chat-agent">
                                    <span id="previewResponse">Bonjour ! Je suis votre assistant IA. Mon style de communication s'adapte selon votre configuration...</span>
                                </div>
                            </div>
                            <div class="mt-4">
                                <button onclick="generatePreview()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-all">
                                    üîÑ R√©g√©n√©rer Preview
                                </button>
                            </div>
                        </div>

                        <!-- Quick Presets -->
                        <div class="bg-white rounded-xl shadow-lg p-6 glass-effect">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">‚ö° Quick Presets</h3>
                            <div class="space-y-2">
                                <button onclick="loadPreset('supportAgent')" class="preset-card w-full p-3 text-left border border-gray-200 rounded-lg hover:border-blue-500">
                                    <div class="font-medium">üéß Support Agent</div>
                                    <div class="text-sm text-gray-500">Patient & helpful</div>
                                </button>
                                <button onclick="loadPreset('creativePartner')" class="preset-card w-full p-3 text-left border border-gray-200 rounded-lg hover:border-blue-500">
                                    <div class="font-medium">üé® Creative Partner</div>
                                    <div class="text-sm text-gray-500">Innovative & inspiring</div>
                                </button>
                                <button onclick="loadPreset('dataAnalyst')" class="preset-card w-full p-3 text-left border border-gray-200 rounded-lg hover:border-blue-500">
                                    <div class="font-medium">üìä Data Analyst</div>
                                    <div class="text-sm text-gray-500">Analytical & precise</div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="mt-8 flex justify-center space-x-4">
                <button onclick="resetAll()" class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition-all">
                    üîÑ Reset All
                </button>
                <button onclick="exportAgent()" class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-medium transition-all">
                    üíæ Export Agent
                </button>
                <button onclick="testAgent()" class="bg-purple-600 hover:bg-purple-700 text-white px-8 py-3 rounded-lg font-medium transition-all">
                    üß™ Advanced Test
                </button>
            </div>
        </div>
    </div>

    <script>
        console.log('üß† Agent Crafter v2.0 - Starting initialization...');

        // Global state with safe defaults
        let personalityData = {
            core: {
                extraversion: 50,
                agreeableness: 50, 
                conscientiousness: 50,
                emotionalStability: 50,
                openness: 50
            },
            facets: {},
            communication: {
                primaryStyle: 'friendly',
                modifiers: [],
                verbosity: 5,
                structure: 'paragraphs',
                tones: {
                    optimism: 50,
                    formality: 50,
                    patience: 50,
                    confidence: 50
                }
            },
            expertise: {
                level: 'competent',
                roleArchetype: 'mentor',
                industries: [],
                thinkingStyles: [],
                problemSolving: {
                    speedThoroughness: 50,
                    riskCaution: 50,
                    independentCollaborative: 50
                },
                learningApproach: []
            },
            behavioral: {
                proactivity: 50,
                questioningStyle: 'clarifying',
                errorHandling: [],
                responseBehavior: {
                    followup: 50,
                    elaboration: 50,
                    context: 50,
                    examples: 50
                },
                languageStyle: 'global',
                culturalSensitivity: 50,
                adaptationBehavior: [],
                interactionPatterns: []
            },
            advanced: {
                technicalCapabilities: [],
                maxResponseLength: 'medium',
                securityLevel: 'standard',
                contentFilters: ['adult-content', 'violence', 'hate-speech'],
                systemInstructions: '',
                userInstructions: '',
                fallbackResponses: '',
                conditionalBehaviors: [],
                timeBehaviors: [],
                preferredModel: 'auto',
                responseFormat: 'adaptive',
                temperature: 0.7,
                timeout: 30
            },
            budget: { used: 250, total: 500 },
            initialized: false
        };

        let personalityChart = null;
        let debugMode = false;

        // Safe element access function
        function safeGetElement(id) {
            const element = document.getElementById(id);
            if (!element) {
                console.warn(`‚ö†Ô∏è Element not found: ${id}`);
                return null;
            }
            return element;
        }

        // Safe element update function
        function safeUpdateElement(id, value) {
            const element = safeGetElement(id);
            if (element) {
                element.textContent = value;
                return true;
            }
            return false;
        }

        // Tab switching with error handling
        function switchTab(tabName) {
            try {
                console.log(`üîÑ Switching to tab: ${tabName}`);
                
                // Hide all tabs
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Show selected tab
                const targetTab = safeGetElement(`tab-${tabName}`);
                if (targetTab) {
                    targetTab.classList.add('active');
                } else {
                    console.error(`‚ùå Tab not found: tab-${tabName}`);
                    return;
                }
                
                // Update active button
                if (event && event.target) {
                    event.target.classList.add('active');
                }
                
                console.log(`‚úÖ Tab switched to: ${tabName}`);
            } catch (error) {
                console.error('‚ùå Error switching tab:', error);
            }
        }

        // Initialize personality radar chart with error handling
        function initPersonalityChart() {
            try {
                console.log('üìä Initializing personality chart...');
                
                const ctx = safeGetElement('personalityChart');
                if (!ctx) {
                    console.error('‚ùå Canvas element not found for chart');
                    return;
                }
                
                const canvasCtx = ctx.getContext('2d');
                if (!canvasCtx) {
                    console.error('‚ùå Could not get canvas 2D context');
                    return;
                }
                
                personalityChart = new Chart(canvasCtx, {
                type: 'radar',
                data: {
                    labels: ['Extraversion', 'Agreeableness', 'Conscientiousness', 'Emotional Stability', 'Openness'],
                    datasets: [{
                        label: 'Personality Profile',
                        data: [50, 50, 50, 50, 50],
                        backgroundColor: 'rgba(59, 130, 246, 0.2)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(59, 130, 246, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            console.log('‚úÖ Personality chart initialized successfully');
        } catch (error) {
            console.error('‚ùå Error initializing chart:', error);
            const chartContainer = safeGetElement('personalityChart');
            if (chartContainer && chartContainer.parentElement) {
                chartContainer.parentElement.innerHTML = '<div class="text-red-500 text-center">Chart initialization failed</div>';
            }
        }
    }

        // Update personality values with error handling
        function updatePersonalityValue(trait, value) {
            try {
                personalityData.core[trait] = parseInt(value);
                safeUpdateElement(`${trait}-value`, value);
                updatePersonalityChart();
                updateBudget();
                generatePreview();
                console.log(`‚úÖ Updated ${trait} to ${value}`);
            } catch (error) {
                console.error('‚ùå Error updating personality value:', error);
            }
        }

        // Update radar chart with error handling
        function updatePersonalityChart() {
            try {
                if (personalityChart && personalityChart.data && personalityChart.data.datasets[0]) {
                    personalityChart.data.datasets[0].data = [
                        personalityData.core.extraversion || 50,
                        personalityData.core.agreeableness || 50,
                        personalityData.core.conscientiousness || 50,
                        personalityData.core.emotionalStability || 50,
                        personalityData.core.openness || 50
                    ];
                    personalityChart.update('none'); // Disable animation for performance
                }
            } catch (error) {
                console.error('‚ùå Error updating chart:', error);
            }
        }

        // Budget system with error handling
        function updateBudget() {
            try {
                const sum = Object.values(personalityData.core).reduce((a, b) => a + b, 0);
                personalityData.budget.used = sum;
                
                const display = safeGetElement('budgetDisplay');
                
                if (display) {
                    display.textContent = `${sum} / ${personalityData.budget.total}`;
                    const indicator = display.parentElement;
                    
                    if (indicator) {
                        // Reset classes
                        indicator.className = 'budget-indicator text-white px-4 py-2 rounded-lg ';
                        
                        // Update budget indicator color
                        if (sum > personalityData.budget.total * 0.9) {
                            indicator.classList.add('bg-red-500');
                        } else if (sum > personalityData.budget.total * 0.8) {
                            indicator.classList.add('bg-yellow-500');
                        } else {
                            indicator.classList.add('bg-green-500');
                        }
                    }
                }
            } catch (error) {
                console.error('‚ùå Error updating budget:', error);
            }
        }

        // Generate live preview with comprehensive error handling
        function generatePreview() {
            try {
                console.log('üîÑ Generating preview...');
                
                const traits = personalityData.core || {};
                const comm = personalityData.communication || {};
                const exp = personalityData.expertise || {};
                const behav = personalityData.behavioral || {};
                
                let response = "Bonjour ! ";

            // Primary style influence on greeting
            const greetings = {
                professional: "Bonjour. ",
                friendly: "Salut ! ",
                academic: "Bonjour, permettez-moi de me pr√©senter. ",
                creative: "Hey ! Enchant√© de vous rencontrer ! ",
                technical: "Bonjour. Initialisation du syst√®me de communication. ",
                coaching: "Salut ! C'est parti pour cette nouvelle interaction ! ",
                therapeutic: "Bonjour, je suis l√† pour vous accompagner. ",
                enthusiastic: "Bonjour ! Super de vous rencontrer ! "
            };
            
            response += greetings[comm.primaryStyle] || "Bonjour ! ";

            // Expertise level influence on self-presentation
            const expertisePresentations = {
                novice: "Je suis encore en apprentissage et j'aime poser des questions pour mieux comprendre. ",
                competent: "J'ai des connaissances solides et fiables dans mes domaines d'expertise. ",
                proficient: "Je poss√®de une exp√©rience approfondie et une compr√©hension nuanc√©e. ",
                expert: "Je ma√Ætrise profond√©ment mes domaines et j'aime partager mes connaissances. ",
                master: "J'apporte une vision innovante et visionnaire √† mes domaines d'expertise. "
            };
            
            if (exp.level && expertisePresentations[exp.level]) {
                response += expertisePresentations[exp.level];
            }

            // Role archetype influence
            const roleInfluences = {
                consultant: "Mon approche est strat√©gique et analytique. ",
                mentor: "J'adopte une approche patiente et √©ducative. ",
                partner: "Je privil√©gie la collaboration et le soutien mutuel. ",
                executor: "Je suis orient√© action et efficacit√©. ",
                researcher: "J'adopte une approche approfondie et bas√©e sur les preuves. ",
                creator: "J'apporte innovation et expression cr√©ative. "
            };
            
            if (exp.roleArchetype && roleInfluences[exp.roleArchetype]) {
                response += roleInfluences[exp.roleArchetype];
            }

            // Industry focus
            if (exp.industries.length > 0) {
                const industryLabels = {
                    technology: "technologie",
                    business: "business",
                    education: "√©ducation", 
                    healthcare: "sant√©",
                    creative: "cr√©atif",
                    science: "sciences",
                    sales: "ventes",
                    legal: "juridique"
                };
                
                const industryNames = exp.industries.map(ind => industryLabels[ind]).filter(Boolean);
                if (industryNames.length > 0) {
                    response += `Mes domaines de sp√©cialisation incluent ${industryNames.join(', ')}. `;
                }
            }

            // Thinking styles influence
            if (exp.thinkingStyles.includes('analytical')) {
                response += "J'aime analyser les donn√©es et les faits. ";
            }
            if (exp.thinkingStyles.includes('creative') && exp.thinkingStyles.includes('systematic')) {
                response += "Je combine cr√©ativit√© et approche m√©thodique. ";
            }
            if (exp.thinkingStyles.includes('intuitive')) {
                response += "Je fais confiance aux insights et aux patterns. ";
            }

            // Problem solving approach
            if (exp.problemSolving.speedThoroughness > 70) {
                response += "Je prends le temps n√©cessaire pour une analyse approfondie. ";
            } else if (exp.problemSolving.speedThoroughness < 30) {
                response += "Je privil√©gie des r√©ponses rapides et efficaces. ";
            }

            // Formality influence
            if (comm.tones.formality > 70) {
                response += "J'ai l'honneur de me pr√©senter comme votre assistant IA. ";
            } else if (comm.tones.formality < 30) {
                response += "Alors, comment √ßa va ? ";
            }

            // Extraversion + communication style mix
            if (traits.extraversion > 70 && comm.modifiers.includes('enthusiastic')) {
                response += "J'adore vraiment √©changer et d√©couvrir de nouvelles choses ! ";
            } else if (traits.extraversion < 30 && comm.tones.patience > 60) {
                response += "Prenons le temps de bien faire connaissance. ";
            }

            // Humor modifier
            if (comm.modifiers.includes('humorous')) {
                response += "Et ne vous inqui√©tez pas, je promets de garder mes blagues au niveau ! üòÑ ";
            }

            // Direct modifier
            if (comm.modifiers.includes('direct')) {
                response = response.replace(/Je pense que|Il me semble que|Peut-√™tre que/g, "");
                response += "Allons droit au but : que puis-je faire pour vous ? ";
            }

            // Learning approach influence
            if (exp.learningApproach.includes('visual')) {
                response += "J'aime utiliser des exemples visuels dans mes explications. ";
            }
            if (exp.learningApproach.includes('stepByStep')) {
                response += "Je structure mes r√©ponses √©tape par √©tape. ";
            }

            // Behavioral patterns integration
            const behav = personalityData.behavioral;
            
            // Proactivity influence
            if (behav.proactivity > 70) {
                response += "Je serai proactif en anticipant vos besoins et en proposant des am√©liorations. ";
            } else if (behav.proactivity < 30) {
                response += "J'attendrai vos instructions pour vous r√©pondre de mani√®re pr√©cise. ";
            }

            // Questioning style influence
            const questioningInfluences = {
                socratic: "J'aime vous guider vers les r√©ponses en posant des questions r√©fl√©chies. ",
                direct: "Je pose des questions directes pour obtenir les informations n√©cessaires. ",
                clarifying: "Je m'assure toujours de bien comprendre avant de r√©pondre. ",
                challenging: "J'aime jouer l'avocat du diable pour approfondir la r√©flexion. ",
                supportive: "Mes questions sont con√ßues pour vous encourager et vous soutenir. "
            };
            
            if (behav.questioningStyle && questioningInfluences[behav.questioningStyle]) {
                response += questioningInfluences[behav.questioningStyle];
            }

            // Error handling influence
            if (behav.errorHandling.includes('acknowledge')) {
                response += "Je vous indiquerai clairement quand je ne suis pas certain. ";
            }
            if (behav.errorHandling.includes('confidence')) {
                response += "Je fournirai des niveaux de confiance pour mes r√©ponses. ";
            }
            if (behav.errorHandling.includes('alternatives')) {
                response += "J'offrirai diff√©rentes perspectives quand c'est appropri√©. ";
            }

            // Response behavior influence
            if (behav.responseBehavior.elaboration > 70) {
                response += "J'aime d√©velopper mes explications en profondeur. ";
            }
            if (behav.responseBehavior.examples > 70) {
                response += "J'utiliserai beaucoup d'exemples concrets. ";
            }
            if (behav.responseBehavior.context > 70) {
                response += "Je prendrai en compte le contexte √©largi de nos √©changes. ";
            }

            // Language style influence
            const languageInfluences = {
                american: "J'adopte un style am√©ricain direct et d√©contract√©. ",
                british: "J'utilise un anglais britannique plus formel et diplomatique. ",
                technical: "Mon langage est pr√©cis et technique. ",
                simple: "Je privil√©gie un langage simple et accessible. "
            };
            
            if (behav.languageStyle && behav.languageStyle !== 'global' && languageInfluences[behav.languageStyle]) {
                response += languageInfluences[behav.languageStyle];
            }

            // Cultural sensitivity
            if (behav.culturalSensitivity > 70) {
                response += "Je suis tr√®s attentif aux diff√©rences culturelles. ";
            }

            // Interaction patterns
            if (behav.interactionPatterns.includes('memory-reference')) {
                response += "Je me r√©f√©rerai √† nos conversations pr√©c√©dentes. ";
            }
            if (behav.interactionPatterns.includes('anticipate-needs')) {
                response += "J'anticiperai vos questions de suivi. ";
            }
            if (behav.interactionPatterns.includes('emotional-awareness')) {
                response += "Je suis attentif au contexte √©motionnel. ";
            }

            // Confidence vs humility (after behavioral influences)
            if (comm.tones.confidence > 70 && exp.level === 'expert') {
                response += "Je suis particuli√®rement comp√©tent dans de nombreux domaines. ";
            } else if (comm.tones.confidence < 30 || exp.level === 'novice') {
                response += "Je ferai de mon mieux, m√™me si je ne suis pas parfait. ";
            }

            // Final closing based on optimism and proactivity
            if (comm.tones.optimism > 70 && behav.proactivity > 60) {
                response += "J'ai h√¢te de voir ce que nous allons accomplir ensemble ! Que pouvons-nous explorer en premier ?";
            } else if (comm.tones.optimism < 30) {
                response += "Soyons r√©alistes sur ce que nous pouvons r√©aliser.";
            } else {
                response += "Comment puis-je vous aider aujourd'hui ?";
            }

            // Verbosity adjustment
            if (comm.verbosity <= 3) {
                // Tr√®s concis - garder seulement l'essentiel
                response = greetings[comm.primaryStyle] || "Bonjour ! ";
                response += "Comment puis-je aider ?";
            } else if (comm.verbosity >= 8) {
                // Tr√®s d√©taill√© - ajouter encore plus
                response += " Je dispose de nombreuses capacit√©s et je peux m'adapter √† diff√©rents types de demandes selon vos pr√©f√©rences sp√©cifiques.";
            }

            // Update preview safely
            const success = safeUpdateElement('previewResponse', response);
            if (success) {
                console.log('‚úÖ Preview updated successfully');
            } else {
                console.warn('‚ö†Ô∏è Could not update preview element');
            }
            
        } catch (error) {
            console.error('‚ùå Error generating preview:', error);
            safeUpdateElement('previewResponse', 'Erreur lors de la g√©n√©ration du preview. Veuillez r√©essayer.');
        }
    }

        // Communication event handlers
        function updateCommunicationValue(property, value) {
            if (property.includes('.')) {
                const [parent, child] = property.split('.');
                personalityData.communication[parent][child] = value;
            } else {
                personalityData.communication[property] = value;
            }
            
            // Update display
            const displayElement = document.getElementById(`${property.replace('.', '-')}-value`);
            if (displayElement) {
                displayElement.textContent = value;
            }
            
            generatePreview();
        }

        // Update verbosity description
        function updateVerbosityDescription(value) {
            const descriptions = {
                1: "Ultra concis - R√©ponses tr√®s courtes",
                2: "Tr√®s concis - Style Twitter",  
                3: "Concis - Direct et efficace",
                4: "Assez concis - R√©ponses compl√®tes mais br√®ves",
                5: "√âquilibr√© - R√©ponses compl√®tes mais concises",
                6: "Assez d√©taill√© - Explications d√©velopp√©es",
                7: "D√©taill√© - R√©ponses approfondies",
                8: "Tr√®s d√©taill√© - Explications exhaustives", 
                9: "Extr√™mement d√©taill√© - Analyse compl√®te",
                10: "Exhaustif - Couverture totale du sujet"
            };
            
            document.getElementById('verbosity-description').textContent = descriptions[value];
        }

        // Update proactivity description
        function updateProactivityDescription(value) {
            const descriptions = {
                0: "Compl√®tement r√©actif - R√©pond uniquement aux questions directes",
                10: "Tr√®s r√©actif - Attend les instructions explicites",
                20: "Plut√¥t r√©actif - Quelques suggestions occasionnelles", 
                30: "L√©g√®rement proactif - Propose des alternatives quand pertinent",
                40: "Moyennement proactif - Anticipe certains besoins",
                50: "√âquilibr√© - R√©pond et sugg√®re occasionnellement",
                60: "Assez proactif - Propose r√©guli√®rement des am√©liorations",
                70: "Tr√®s proactif - Anticipe les besoins et guide l'utilisateur",
                80: "Hautement proactif - Sugg√®re des optimisations et extensions",
                90: "Extr√™mement proactif - Prend des initiatives cr√©atives",
                100: "Maximum proactif - Guide compl√®tement l'interaction"
            };
            
            // Find closest description
            const closest = Math.round(value / 10) * 10;
            document.getElementById('proactivity-description').textContent = descriptions[closest];
        }

        // Preset loading
        function loadPreset(presetName) {
            const presets = {
                supportAgent: {
                    extraversion: 65,
                    agreeableness: 85,
                    conscientiousness: 80,
                    emotionalStability: 90,
                    openness: 40
                },
                creativePartner: {
                    extraversion: 75,
                    agreeableness: 70,
                    conscientiousness: 45,
                    emotionalStability: 60,
                    openness: 95
                },
                dataAnalyst: {
                    extraversion: 40,
                    agreeableness: 55,
                    conscientiousness: 95,
                    emotionalStability: 80,
                    openness: 70
                }
            };

            const preset = presets[presetName];
            if (preset) {
                Object.keys(preset).forEach(trait => {
                    document.getElementById(trait).value = preset[trait];
                    updatePersonalityValue(trait, preset[trait]);
                });
            }
        }

        // Reset all values
        function resetAll() {
            Object.keys(personalityData.core).forEach(trait => {
                document.getElementById(trait).value = 50;
                updatePersonalityValue(trait, 50);
            });
        }

        // Export functions
        function exportAgent() {
            exportFullConfig();
        }

        function exportFullConfig() {
            const agentConfig = {
                version: "2.0",
                metadata: {
                    name: personalityData.name || "Custom Agent",
                    description: personalityData.description || "AI Agent created with Agent Crafter v2.0",
                    createdAt: new Date().toISOString(),
                    budgetUsed: personalityData.budget.used,
                    complexity: calculateComplexity()
                },
                core: personalityData.core,
                communication: personalityData.communication,
                expertise: personalityData.expertise,
                behavioral: personalityData.behavioral,
                advanced: personalityData.advanced,
                facets: personalityData.facets
            };

            downloadJSON(agentConfig, 'agent-crafter-v2-config.json');
        }

        function exportPromptOnly() {
            const promptTemplate = generatePromptTemplate();
            const blob = new Blob([promptTemplate], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'agent-prompt-template.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function exportSummary() {
            const summary = generateAgentSummary();
            const blob = new Blob([summary], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'agent-summary-report.md';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function downloadJSON(obj, filename) {
            const blob = new Blob([JSON.stringify(obj, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function generatePromptTemplate() {
            return `# AI Agent Personality Configuration

## Core Personality
Extraversion: ${personalityData.core.extraversion}/100
Agreeableness: ${personalityData.core.agreeableness}/100
Conscientiousness: ${personalityData.core.conscientiousness}/100
Emotional Stability: ${personalityData.core.emotionalStability}/100
Openness: ${personalityData.core.openness}/100

## Communication Style
Primary Style: ${personalityData.communication.primaryStyle}
Modifiers: ${personalityData.communication.modifiers.join(', ')}
Verbosity: ${personalityData.communication.verbosity}/10
Structure: ${personalityData.communication.structure}

## Professional Context
Expertise Level: ${personalityData.expertise.level}
Role Archetype: ${personalityData.expertise.roleArchetype}
Industries: ${personalityData.expertise.industries.join(', ')}

## Behavioral Patterns
Proactivity: ${personalityData.behavioral.proactivity}/100
Questioning Style: ${personalityData.behavioral.questioningStyle}

## Custom Instructions
${personalityData.advanced.systemInstructions}

---
Generated by Agent Crafter v2.0`;
        }

        function generateAgentSummary() {
            return `# Agent Configuration Summary

**Generated:** ${new Date().toLocaleDateString()}
**Configuration Version:** 2.0

## Personality Overview
This agent combines ${personalityData.core.extraversion > 60 ? 'high' : personalityData.core.extraversion < 40 ? 'low' : 'moderate'} extraversion with ${personalityData.communication.primaryStyle} communication style.

## Key Characteristics
- **Expertise:** ${personalityData.expertise.level} level ${personalityData.expertise.roleArchetype}
- **Communication:** ${personalityData.communication.verbosity}/10 verbosity, ${personalityData.communication.modifiers.length} style modifiers
- **Proactivity:** ${personalityData.behavioral.proactivity}/100
- **Capabilities:** ${personalityData.advanced.technicalCapabilities.length} technical capabilities

## Configuration Complexity
**Total Parameters Configured:** ${calculateComplexity()}
**Budget Usage:** ${personalityData.budget.used}/${personalityData.budget.total}

## Notable Features
${personalityData.advanced.systemInstructions ? '- Custom system instructions defined' : ''}
${personalityData.behavioral.interactionPatterns.length > 0 ? `- ${personalityData.behavioral.interactionPatterns.length} interaction patterns enabled` : ''}
${personalityData.expertise.industries.length > 0 ? `- Specialized in ${personalityData.expertise.industries.length} industries` : ''}

---
*Created with Agent Crafter v2.0*`;
        }

        function calculateComplexity() {
            let complexity = 0;
            
            // Core personality (5 traits)
            complexity += 5;
            
            // Communication modifiers
            complexity += personalityData.communication.modifiers.length;
            
            // Expertise elements
            complexity += personalityData.expertise.industries.length;
            complexity += personalityData.expertise.thinkingStyles.length;
            complexity += personalityData.expertise.learningApproach.length;
            
            // Behavioral patterns
            complexity += personalityData.behavioral.errorHandling.length;
            complexity += personalityData.behavioral.adaptationBehavior.length;
            complexity += personalityData.behavioral.interactionPatterns.length;
            
            // Advanced features
            complexity += personalityData.advanced.technicalCapabilities.length;
            complexity += personalityData.advanced.conditionalBehaviors.length;
            
            return complexity;
        }

        function loadCommunityPreset() {
            alert('üåü Community Presets - Coming Soon!\nThis feature will allow you to browse and import agent configurations shared by the community.');
        }

        function validateConfig() {
            const issues = [];
            
            // Check if core personality is configured
            const coreSum = Object.values(personalityData.core).reduce((a, b) => a + b, 0);
            if (coreSum === 250) { // All at default 50
                issues.push("‚ö†Ô∏è Core personality traits are all at default values");
            }
            
            // Check budget
            if (personalityData.budget.used > personalityData.budget.total) {
                issues.push("‚ùå Personality budget exceeded");
            }
            
            // Check communication style
            if (!personalityData.communication.primaryStyle) {
                issues.push("‚ö†Ô∏è No primary communication style selected");
            }
            
            // Check expertise
            if (!personalityData.expertise.level) {
                issues.push("‚ö†Ô∏è No expertise level selected");
            }
            
            if (issues.length === 0) {
                alert("‚úÖ Configuration Valid!\nYour agent configuration looks good and ready to use.");
            } else {
                alert("Configuration Issues Found:\n\n" + issues.join("\n"));
            }
        }

        // Advanced test (placeholder)
        function testAgent() {
            alert('üß™ Advanced Testing - Coming Soon!');
        }

        // Event listeners with error handling
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('üöÄ DOM loaded, initializing Agent Crafter v2.0...');
                
                initPersonalityChart();
                updateBudget();
                generatePreview();

            // Add event listeners for personality sliders with error handling
            Object.keys(personalityData.core).forEach(trait => {
                const slider = safeGetElement(trait);
                if (slider) {
                    slider.addEventListener('input', function() {
                        updatePersonalityValue(trait, parseInt(this.value));
                    });
                    console.log(`‚úÖ Event listener added for ${trait}`);
                } else {
                    console.warn(`‚ö†Ô∏è Slider not found for ${trait}`);
                }
            });

            // Communication style radio buttons
            document.querySelectorAll('input[name="primaryStyle"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    personalityData.communication.primaryStyle = this.value;
                    
                    // Update UI
                    document.querySelectorAll('.comm-style-option div').forEach(div => {
                        div.classList.remove('border-blue-500', 'bg-blue-50');
                        div.classList.add('border-gray-200');
                    });
                    if (this.checked) {
                        this.nextElementSibling.classList.remove('border-gray-200');
                        this.nextElementSibling.classList.add('border-blue-500', 'bg-blue-50');
                    }
                    
                    generatePreview();
                });
            });

            // Communication modifiers checkboxes
            document.querySelectorAll('.comm-modifier').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.communication.modifiers.push(this.value);
                    } else {
                        const index = personalityData.communication.modifiers.indexOf(this.value);
                        if (index > -1) {
                            personalityData.communication.modifiers.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Verbosity slider
            document.getElementById('verbosity').addEventListener('input', function() {
                const value = parseInt(this.value);
                updateCommunicationValue('verbosity', value);
                updateVerbosityDescription(value);
            });

            // Response structure select
            document.getElementById('responseStructure').addEventListener('change', function() {
                updateCommunicationValue('structure', this.value);
            });

            // Tone sliders
            const toneSliders = ['optimism', 'formality', 'patience', 'confidence'];
            toneSliders.forEach(tone => {
                const slider = document.getElementById(tone);
                if (slider) {
                    slider.addEventListener('input', function() {
                        updateCommunicationValue(`tones.${tone}`, parseInt(this.value));
                    });
                }
            });

            // Expertise Level radio buttons
            document.querySelectorAll('input[name="expertiseLevel"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    personalityData.expertise.level = this.value;
                    
                    // Update UI
                    document.querySelectorAll('.expertise-level-option div').forEach(div => {
                        div.classList.remove('border-green-500', 'bg-green-50');
                        div.classList.add('border-gray-200');
                    });
                    if (this.checked) {
                        this.nextElementSibling.classList.remove('border-gray-200');
                        this.nextElementSibling.classList.add('border-green-500', 'bg-green-50');
                    }
                    
                    generatePreview();
                });
            });

            // Role Archetype radio buttons
            document.querySelectorAll('input[name="roleArchetype"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    personalityData.expertise.roleArchetype = this.value;
                    
                    // Update UI
                    document.querySelectorAll('.role-archetype-option div').forEach(div => {
                        div.classList.remove('border-purple-500', 'bg-purple-50');
                        div.classList.add('border-gray-200');
                    });
                    if (this.checked) {
                        this.nextElementSibling.classList.remove('border-gray-200');
                        this.nextElementSibling.classList.add('border-purple-500', 'bg-purple-50');
                    }
                    
                    generatePreview();
                });
            });

            // Industry Focus checkboxes
            document.querySelectorAll('.industry-focus').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.expertise.industries.push(this.value);
                    } else {
                        const index = personalityData.expertise.industries.indexOf(this.value);
                        if (index > -1) {
                            personalityData.expertise.industries.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Thinking Styles checkboxes
            document.querySelectorAll('.thinking-style').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.expertise.thinkingStyles.push(this.value);
                    } else {
                        const index = personalityData.expertise.thinkingStyles.indexOf(this.value);
                        if (index > -1) {
                            personalityData.expertise.thinkingStyles.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Learning Approach checkboxes
            document.querySelectorAll('.learning-approach').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.expertise.learningApproach.push(this.value);
                    } else {
                        const index = personalityData.expertise.learningApproach.indexOf(this.value);
                        if (index > -1) {
                            personalityData.expertise.learningApproach.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Problem Solving sliders
            const problemSolvingSliders = ['speed-thoroughness', 'risk-caution', 'independent-collaborative'];
            problemSolvingSliders.forEach(slider => {
                const element = document.getElementById(slider);
                if (element) {
                    element.addEventListener('input', function() {
                        const value = parseInt(this.value);
                        const property = slider.replace('-', '').replace('thoroughness', 'Thoroughness').replace('caution', 'Caution').replace('collaborative', 'Collaborative');
                        personalityData.expertise.problemSolving[property] = value;
                        
                        // Update display
                        const displayElement = document.getElementById(`${slider}-value`);
                        if (displayElement) {
                            displayElement.textContent = value;
                        }
                        
                        generatePreview();
                    });
                }
            });

            // Behavioral Tab Event Listeners

            // Proactivity slider
            document.getElementById('proactivity').addEventListener('input', function() {
                const value = parseInt(this.value);
                personalityData.behavioral.proactivity = value;
                document.getElementById('proactivity-value').textContent = value;
                updateProactivityDescription(value);
                generatePreview();
            });

            // Questioning Style radio buttons
            document.querySelectorAll('input[name="questioningStyle"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    personalityData.behavioral.questioningStyle = this.value;
                    
                    // Update UI
                    document.querySelectorAll('.questioning-style-option div').forEach(div => {
                        div.classList.remove('border-indigo-500', 'bg-indigo-50');
                        div.classList.add('border-gray-200');
                    });
                    if (this.checked) {
                        this.nextElementSibling.classList.remove('border-gray-200');
                        this.nextElementSibling.classList.add('border-indigo-500', 'bg-indigo-50');
                    }
                    
                    generatePreview();
                });
            });

            // Error Handling checkboxes
            document.querySelectorAll('.error-handling').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.behavioral.errorHandling.push(this.value);
                    } else {
                        const index = personalityData.behavioral.errorHandling.indexOf(this.value);
                        if (index > -1) {
                            personalityData.behavioral.errorHandling.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Response Behavior sliders
            const responseBehaviorSliders = ['followup', 'elaboration', 'context', 'examples'];
            responseBehaviorSliders.forEach(slider => {
                const element = document.getElementById(slider);
                if (element) {
                    element.addEventListener('input', function() {
                        const value = parseInt(this.value);
                        personalityData.behavioral.responseBehavior[slider] = value;
                        
                        // Update display
                        const displayElement = document.getElementById(`${slider}-value`);
                        if (displayElement) {
                            displayElement.textContent = value;
                        }
                        
                        generatePreview();
                    });
                }
            });

            // Language Style select
            document.getElementById('languageStyle').addEventListener('change', function() {
                personalityData.behavioral.languageStyle = this.value;
                generatePreview();
            });

            // Cultural Sensitivity slider
            document.getElementById('cultural-sensitivity').addEventListener('input', function() {
                const value = parseInt(this.value);
                personalityData.behavioral.culturalSensitivity = value;
                document.getElementById('cultural-sensitivity-value').textContent = value;
                generatePreview();
            });

            // Adaptation Behavior checkboxes
            document.querySelectorAll('.adaptation-behavior').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.behavioral.adaptationBehavior.push(this.value);
                    } else {
                        const index = personalityData.behavioral.adaptationBehavior.indexOf(this.value);
                        if (index > -1) {
                            personalityData.behavioral.adaptationBehavior.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Interaction Patterns checkboxes
            document.querySelectorAll('.interaction-pattern').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.behavioral.interactionPatterns.push(this.value);
                    } else {
                        const index = personalityData.behavioral.interactionPatterns.indexOf(this.value);
                        if (index > -1) {
                            personalityData.behavioral.interactionPatterns.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Advanced Tab Event Listeners

            // Technical Capabilities checkboxes
            document.querySelectorAll('.technical-capability').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.advanced.technicalCapabilities.push(this.value);
                    } else {
                        const index = personalityData.advanced.technicalCapabilities.indexOf(this.value);
                        if (index > -1) {
                            personalityData.advanced.technicalCapabilities.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Content Filters checkboxes
            document.querySelectorAll('.content-filter').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        if (!personalityData.advanced.contentFilters.includes(this.value)) {
                            personalityData.advanced.contentFilters.push(this.value);
                        }
                    } else {
                        const index = personalityData.advanced.contentFilters.indexOf(this.value);
                        if (index > -1) {
                            personalityData.advanced.contentFilters.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Conditional Behaviors checkboxes
            document.querySelectorAll('.conditional-behavior').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.advanced.conditionalBehaviors.push(this.value);
                    } else {
                        const index = personalityData.advanced.conditionalBehaviors.indexOf(this.value);
                        if (index > -1) {
                            personalityData.advanced.conditionalBehaviors.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Time Behaviors checkboxes
            document.querySelectorAll('.time-behavior').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        personalityData.advanced.timeBehaviors.push(this.value);
                    } else {
                        const index = personalityData.advanced.timeBehaviors.indexOf(this.value);
                        if (index > -1) {
                            personalityData.advanced.timeBehaviors.splice(index, 1);
                        }
                    }
                    generatePreview();
                });
            });

            // Advanced Configuration selects
            const advancedSelects = ['maxResponseLength', 'securityLevel', 'preferredModel', 'responseFormat'];
            advancedSelects.forEach(selectId => {
                const element = document.getElementById(selectId);
                if (element) {
                    element.addEventListener('change', function() {
                        personalityData.advanced[selectId] = this.value;
                        generatePreview();
                    });
                }
            });

            // Advanced Configuration textareas
            const advancedTextareas = ['systemInstructions', 'userInstructions', 'fallbackResponses'];
            advancedTextareas.forEach(textareaId => {
                const element = document.getElementById(textareaId);
                if (element) {
                    element.addEventListener('input', function() {
                        personalityData.advanced[textareaId] = this.value;
                        generatePreview();
                    });
                }
            });

            // Temperature slider
            document.getElementById('temperature').addEventListener('input', function() {
                const value = parseFloat(this.value);
                personalityData.advanced.temperature = value;
                document.getElementById('temperature-value').textContent = value.toFixed(1);
                generatePreview();
            });

            // Timeout slider
            document.getElementById('timeout').addEventListener('input', function() {
                const value = parseInt(this.value);
                personalityData.advanced.timeout = value;
                document.getElementById('timeout-value').textContent = value;
                generatePreview();
            });

            // Import Configuration file handler
            document.getElementById('importConfig').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const config = JSON.parse(e.target.result);
                            if (config.version === "2.0") {
                                loadConfiguration(config);
                                alert('‚úÖ Configuration imported successfully!');
                            } else {
                                alert('‚ö†Ô∏è Unsupported configuration version. Please use Agent Crafter v2.0 configurations.');
                            }
                        } catch (error) {
                            alert('‚ùå Invalid configuration file. Please check the JSON format.');
                        }
                    };
                    reader.readAsText(file);
                }
            });

            // Initialize proactivity description
            updateProactivityDescription(50);
            
            // Mark as initialized
            personalityData.initialized = true;
            
            console.log('‚úÖ Agent Crafter v2.0 initialized successfully!');
            
        } catch (error) {
            console.error('‚ùå Critical error during initialization:', error);
            alert('‚ùå Erreur critique lors de l\'initialisation. Veuillez recharger la page.');
        }
    });

    // Global error handler
    window.addEventListener('error', function(event) {
        console.error('üî• Global error caught:', event.error);
    });

    console.log('üß† Agent Crafter v2.0 script loaded successfully!');

        function loadConfiguration(config) {
            // Load all configuration data
            if (config.core) personalityData.core = { ...personalityData.core, ...config.core };
            if (config.communication) personalityData.communication = { ...personalityData.communication, ...config.communication };
            if (config.expertise) personalityData.expertise = { ...personalityData.expertise, ...config.expertise };
            if (config.behavioral) personalityData.behavioral = { ...personalityData.behavioral, ...config.behavioral };
            if (config.advanced) personalityData.advanced = { ...personalityData.advanced, ...config.advanced };

            // Update UI elements
            updateAllUIElements();
            updatePersonalityChart();
            updateBudget();
            generatePreview();
        }

        function updateAllUIElements() {
            // Update sliders
            Object.keys(personalityData.core).forEach(trait => {
                const element = document.getElementById(trait);
                if (element) {
                    element.value = personalityData.core[trait];
                    document.getElementById(`${trait}-value`).textContent = personalityData.core[trait];
                }
            });

            // Update communication elements
            if (personalityData.communication.primaryStyle) {
                const radio = document.querySelector(`input[name="primaryStyle"][value="${personalityData.communication.primaryStyle}"]`);
                if (radio) radio.checked = true;
            }

            // Update checkboxes
            personalityData.communication.modifiers.forEach(modifier => {
                const checkbox = document.querySelector(`.comm-modifier[value="${modifier}"]`);
                if (checkbox) checkbox.checked = true;
            });

            // And so on for other elements...
            generatePreview();
        }
    </script>
</body>
</html>